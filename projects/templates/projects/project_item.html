{% load cloudinary %}
<div class="bg-slate-800/30 backdrop-blur-sm rounded-2xl p-6 border border-slate-700/50 flex flex-col">
    <!-- Project Image -->
    <div class="relative group mb-6">
        <div class="absolute inset-0 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl blur opacity-75 group-hover:opacity-100 transition-opacity"></div>

        {% if project.image %}
             {% cloudinary project.image.name width=600 height=400 crop="fill" quality="auto" fetch_format="auto" 
                class="relative rounded-xl shadow-2xl w-full h-48 object-cover transition-transform duration-300 
                group-hover:scale-105" loading="lazy" alt=project.name 
             %}
        {% else %}
            <img
                src="https://placehold.co/600x400?text=No+Image+Available"
                alt="No Image Available"
                class="relative rounded-xl shadow-2xl w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105"
            >
        {% endif %}
    </div>

    <!-- Project Details -->
    <div class="flex-1 flex flex-col space-y-4">
        <div>
            <a href="{% url 'projects:project_detail' project.slug %}">
                <h3 class="text-xl font-bold text-white mb-3 hover:text-gray-300">
                    {{ project.name }}
                </h3>
            </a>
            <div class="text-gray-400 text-sm leading-relaxed">
                {{ project.description|safe|truncatewords:20 }}
            </div>
        </div>

        <!-- Technologies -->
        <div class="flex-1">
            <h4 class="text-white font-semibold mb-3 text-sm">Technologies:</h4>
            <div class="flex flex-wrap gap-2">
                {% for tech_stack in project.tech_stacks.all %}
                    <a href="{% url 'projects:project_list' %}?tech_stack={{ tech_stack.name }}"
                       class="inline-block transition-transform duration-200 ease-in-out transform hover:scale-105">
                        <span class="px-2 py-1 bg-purple-600/20 text-purple-300 rounded-full text-xs font-medium border border-purple-500/30 hover:bg-purple-600/30 hover:text-purple-200">
                            {{ tech_stack.name }}
                        </span>
                    </a>
                {% endfor %}
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex gap-3 pt-4">
            {% if project.demo_link %}
                <a href="{{ project.demo_link }}" target="_blank"
                   class="flex items-center gap-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-purple-500/25 flex-1 justify-center">
                    Demo
                </a>
            {% endif %}

            {% if project.source_code %}
                <a href="{{ project.source_code }}"
                   class="flex items-center gap-2 border-2 border-purple-400 text-purple-400 px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-300 hover:bg-purple-400 hover:text-white hover:scale-105 flex-1 justify-center">
                    Code
                </a>
            {% endif %}
        </div>
    </div>
</div>
